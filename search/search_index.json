{
    "docs": [
        {
            "location": "/",
            "text": "iDiffuse: on-sky photometric precisions with diffusers\n\n\nWelcome to the \niDiffuse\n documentation, a Python package to calculate expected diffuser-assisted photometric precisions from the ground.\n\n\niDiffuse is currently heavily focused on calculating the diffuser-assisted photometric precision of ARCTIC on the ARC 3.5m Telescope at Apache Point Observatory. \n\n\nHowever, iDiffuse is written in a way that it is easy to modify and calculate diffuser-assisted photometric precisions for other telescopes.\n\n\nContents:\n\n\n\n\nInstallation\n\n\nGetting Started\n\n\nSizing Diffusers\n\n\n(Coming soon!) Extending \niDiffuse\n for other telescopes \n\n\n\n\nMore information on diffusers\n\n\nTake a look at the following discussions for further discussion on diffusers for high precision photometry applications:\n\n\n\n\nMore about diffusers on this website\n\n\nPaper I\n\n\nPaper II",
            "title": "Home"
        },
        {
            "location": "/#idiffuse-on-sky-photometric-precisions-with-diffusers",
            "text": "Welcome to the  iDiffuse  documentation, a Python package to calculate expected diffuser-assisted photometric precisions from the ground.  iDiffuse is currently heavily focused on calculating the diffuser-assisted photometric precision of ARCTIC on the ARC 3.5m Telescope at Apache Point Observatory.   However, iDiffuse is written in a way that it is easy to modify and calculate diffuser-assisted photometric precisions for other telescopes.  Contents:   Installation  Getting Started  Sizing Diffusers  (Coming soon!) Extending  iDiffuse  for other telescopes",
            "title": "iDiffuse: on-sky photometric precisions with diffusers"
        },
        {
            "location": "/#more-information-on-diffusers",
            "text": "Take a look at the following discussions for further discussion on diffusers for high precision photometry applications:   More about diffusers on this website  Paper I  Paper II",
            "title": "More information on diffusers"
        },
        {
            "location": "/installation/",
            "text": "Installation\n\n\nThere are two main ways to install \niDiffuse\n:\n\n\nFrom Git\n\n\niDiffuse\n can be installed from Git in the following way:\n\n\ngit clone https://github.com/gummiks/idiffuse.git\npython setup.py install\n\n\n\n\nFrom pip\n\n\niDiffuse\n can be installed from pip with the following command:\n\n\npip install idiffuse\n\n\n\n\nNotes\n\n\niDiffuse\n depends on \npysynphot\n, which can be set up to include a number of additional setup files as defined by the \nPYSYN_CDBS\n environment variable, and \npysynphot\n will throw a warning if this variable is not set saying:\n\n\nUserWarning: PYSYN_CDBS is undefined; functionality will be SEVERELY crippled.\n\n\n\n\nHowever, \nidiffuse\n does not currently depend on that functionality in \npysynphot\n, and this warning can be ignored.\n\n\nIf the warning is annoying and/or you want to use more of the functionalities \npysynphot\n has to offer, you can follow the \npysynphot\n installation instruction \nhere",
            "title": "Installation"
        },
        {
            "location": "/installation/#installation",
            "text": "There are two main ways to install  iDiffuse :",
            "title": "Installation"
        },
        {
            "location": "/installation/#from-git",
            "text": "iDiffuse  can be installed from Git in the following way:  git clone https://github.com/gummiks/idiffuse.git\npython setup.py install",
            "title": "From Git"
        },
        {
            "location": "/installation/#from-pip",
            "text": "iDiffuse  can be installed from pip with the following command:  pip install idiffuse",
            "title": "From pip"
        },
        {
            "location": "/installation/#notes",
            "text": "iDiffuse  depends on  pysynphot , which can be set up to include a number of additional setup files as defined by the  PYSYN_CDBS  environment variable, and  pysynphot  will throw a warning if this variable is not set saying:  UserWarning: PYSYN_CDBS is undefined; functionality will be SEVERELY crippled.  However,  idiffuse  does not currently depend on that functionality in  pysynphot , and this warning can be ignored.  If the warning is annoying and/or you want to use more of the functionalities  pysynphot  has to offer, you can follow the  pysynphot  installation instruction  here",
            "title": "Notes"
        },
        {
            "location": "/quickstart/",
            "text": "Getting Started\n\n\nUsing \niDiffuse\n to calculate expected photometric precisions\n\n\nImport necessary packages\n\n\nfrom __future__ import print_function\nimport numpy as np\nimport pandas as pd\nimport idiffuse\nimport pysynphot as S\n# if pysynphot says:\n# - UserWarning: PYSYN_CDBS is undefined; functionality will be SEVERELY crippled.\n# then idiffuse should still work.\n# You can set the PYSYN_CDBS by following the pysynphot installation instructions here:\n# https://pysynphot.readthedocs.io/en/latest/#installation-and-setup\n\n\n\n\nInitialize Telescope Class that implements the ARC 3.5m at APO\n\n\nAlso correctly sets up the diffuser in ARCTIC (0.34 deg opening angle, at a distance of 200mm)\n\n\narc = idiffuse.telescope.TelescopeARC()\n\n\n\n\n# Print descriptive text about the telescope\nprint(arc)\n\n\n\n\nTelescope:                      ARC 3.5m\nThroughput (flat) (%):          39.838\nDiameter (cm):                  350.000\nFnum:                           8.000\nFocal length (m):               28.000\nGain:                           2.000\nPixel size (um):                15.000\nNum pixels:                     4096.000\nPlate scale (arcsec/pix):       0.110\nFOV (arcmin):                   7.509\nDark Noise (e/s/pix):           0.000\nRead Noise (e/pix):             3.700\nAltitude (m):                   2788.000\nCentral Obstruction (%):        9.000\nDiffuser dist to detector (mm): 200.000\n11 available filters in folder: /Users/gks/Dropbox/mypylib/notebooks/GIT/idiffuse/idiffuse/filters\n\n\n\nThe arc object has an attribute to list the available filters.\nThese are also accessible through the arc.FILT_DICT dictionary.\n\n\narc.get_filter_filenames()\n\n\n\n\n['/Users/gks/Dropbox/mypylib/notebooks/GIT/idiffuse/idiffuse/filters/arctic_qe.txt',\n '/Users/gks/Dropbox/mypylib/notebooks/GIT/idiffuse/idiffuse/filters/bess-b.txt',\n '/Users/gks/Dropbox/mypylib/notebooks/GIT/idiffuse/idiffuse/filters/bess-i.txt',\n '/Users/gks/Dropbox/mypylib/notebooks/GIT/idiffuse/idiffuse/filters/bess-r.txt',\n '/Users/gks/Dropbox/mypylib/notebooks/GIT/idiffuse/idiffuse/filters/bess-u.txt',\n '/Users/gks/Dropbox/mypylib/notebooks/GIT/idiffuse/idiffuse/filters/bess-v.txt',\n '/Users/gks/Dropbox/mypylib/notebooks/GIT/idiffuse/idiffuse/filters/semrock_857_30.txt',\n '/Users/gks/Dropbox/mypylib/notebooks/GIT/idiffuse/idiffuse/filters/sloan_g_filter.txt',\n '/Users/gks/Dropbox/mypylib/notebooks/GIT/idiffuse/idiffuse/filters/sloan_i_filter.txt',\n '/Users/gks/Dropbox/mypylib/notebooks/GIT/idiffuse/idiffuse/filters/sloan_r_filter.txt',\n '/Users/gks/Dropbox/mypylib/notebooks/GIT/idiffuse/idiffuse/filters/sloan_z_filter.txt']\n\n\n\nPlot Telescope QE / Throughput plot for given filters\n\n\nWe can plot the throughput of the different filters used, and compare them to the Quantum Efficiency of the ARCTIC detector.\n\n\n# use FILT_DICT dictionary\nifilt = S.FileBandpass(arc.FILTER_DICT['sloan_i_filter.txt'])\nrfilt = S.FileBandpass(arc.FILTER_DICT['sloan_r_filter.txt'])\n\narc.plot_throughput(bandpass=rfilt,bandpass_name=\"SDSS r'\")\narc.plot_throughput(bandpass=ifilt,bandpass_name=\"SDSS i'\")\n\n\n\n\n\n\n\n\nExample on-sky diffuser assisted precision\n\n\nBelow are examples of how to calculate the expected photometric error and the resulting cadence for on-sky observations of a given target. In Stefansson et al. 2018, we compare these expected precision values to the on-sky achieved precision.  \n\n\nK2-28b\n\n\nerr, cad = arc.get_err_cad_for_adu(vegamag=13.8,\n                        BandPass=ifilt,\n                        binning=4,\n                        max_adu_per_pixel=2800.,\n                        read_time=2.7,\n                        airmass=1.3,\n                        num_ref_stars=3.,\n                        sky_mag_per_arcsec=19.7)\n\n\n\n\n##### Exptime #####\nExptime [s]:                  29.954\nTotal cadence [s]:            32.654\nObs. Efficiency [%]:          91.73\nnpix [pix]:                   307.30\nn_b [pix]:                    537.77\n\n##### Counts #####\nStar counts - Total [adu]:    860439.86 \nStar counts - /pix [adu/pix]: 2800.00 \nSky counts - Total [adu]:     223454.12\nSky counts - /pix [adu/pix]:  727.15\n\n##### Noise in exptime=29.95s ######\nPhotometric noise [ppm]       1045.96\nPhoton noise [ppm]:           880.23\nScintillation noise [ppm]:    452.96\nTotal noise [ppm]:            1139.83\n\n##### Noise ######\nNoise in 1min [ppm]:          840.88\nNoise in 30min [ppm]:         153.52\n#####\n\n\n\nTRES-3b\n\n\nerr, cad = arc.get_err_cad_for_adu(vegamag=11.2,\n                        BandPass=ifilt,\n                        binning=4,\n                        max_adu_per_pixel=27000.,\n                        read_time=2.7,\n                        airmass=1.2,\n                        num_ref_stars=13.,\n                        sky_mag_per_arcsec=19.7)\n\n\n\n\n##### Exptime #####\nExptime [s]:                  26.343\nTotal cadence [s]:            29.043\nObs. Efficiency [%]:          90.70\nnpix [pix]:                   307.30\nn_b [pix]:                    537.77\n\n##### Counts #####\nStar counts - Total [adu]:    8297098.66 \nStar counts - /pix [adu/pix]: 27000.00 \nSky counts - Total [adu]:     196514.27\nSky counts - /pix [adu/pix]:  639.49\n\n##### Noise in exptime=26.34s ######\nPhotometric noise [ppm]       259.50\nPhoton noise [ppm]:           254.75\nScintillation noise [ppm]:    377.35\nTotal noise [ppm]:            457.97\n\n##### Noise ######\nNoise in 1min [ppm]:          318.63\nNoise in 30min [ppm]:         58.17\n#####\n\n\n\nWASP-85 A b\n\n\nerr, cad = arc.get_err_cad_for_adu(vegamag=10.0,\n                        BandPass=rfilt,\n                        binning=4,\n                        max_adu_per_pixel=20000.,\n                        read_time=2.7,\n                        airmass=1.3,\n                        num_ref_stars=3.,\n                        sky_mag_per_arcsec=19.7)\n\n\n\n\n##### Exptime #####\nExptime [s]:                  3.896\nTotal cadence [s]:            6.596\nObs. Efficiency [%]:          59.07\nnpix [pix]:                   307.30\nn_b [pix]:                    537.77\n\n##### Counts #####\nStar counts - Total [adu]:    6145999.01 \nStar counts - /pix [adu/pix]: 20000.00 \nSky counts - Total [adu]:     48201.48\nSky counts - /pix [adu/pix]:  156.85\n\n##### Noise in exptime=3.90s ######\nPhotometric noise [ppm]       331.46\nPhoton noise [ppm]:           329.35\nScintillation noise [ppm]:    1255.93\nTotal noise [ppm]:            1298.94\n\n##### Noise ######\nNoise in 1min [ppm]:          430.69\nNoise in 30min [ppm]:         78.63\n#####\n\n\n\nK2-100b\n\n\nerr, cad = arc.get_err_cad_for_adu(vegamag=10.0,\n                        BandPass=ifilt,\n                        binning=4,\n                        max_adu_per_pixel=23000.,\n                        read_time=2.7,\n                        airmass=1.05,\n                        num_ref_stars=10.,\n                        sky_mag_per_arcsec=19.7)\n\n\n\n\n##### Exptime #####\nExptime [s]:                  7.431\nTotal cadence [s]:            10.131\nObs. Efficiency [%]:          73.35\nnpix [pix]:                   307.30\nn_b [pix]:                    537.77\n\n##### Counts #####\nStar counts - Total [adu]:    7067898.86 \nStar counts - /pix [adu/pix]: 23000.00 \nSky counts - Total [adu]:     55431.70\nSky counts - /pix [adu/pix]:  180.38\n\n##### Noise in exptime=7.43s ######\nPhotometric noise [ppm]       280.74\nPhoton noise [ppm]:           278.96\nScintillation noise [ppm]:    568.44\nTotal noise [ppm]:            633.98\n\n##### Noise ######\nNoise in 1min [ppm]:          260.51\nNoise in 30min [ppm]:         47.56\n#####",
            "title": "Getting Started"
        },
        {
            "location": "/quickstart/#getting-started",
            "text": "",
            "title": "Getting Started"
        },
        {
            "location": "/quickstart/#using-idiffuse-to-calculate-expected-photometric-precisions",
            "text": "",
            "title": "Using iDiffuse to calculate expected photometric precisions"
        },
        {
            "location": "/quickstart/#import-necessary-packages",
            "text": "from __future__ import print_function\nimport numpy as np\nimport pandas as pd\nimport idiffuse\nimport pysynphot as S\n# if pysynphot says:\n# - UserWarning: PYSYN_CDBS is undefined; functionality will be SEVERELY crippled.\n# then idiffuse should still work.\n# You can set the PYSYN_CDBS by following the pysynphot installation instructions here:\n# https://pysynphot.readthedocs.io/en/latest/#installation-and-setup",
            "title": "Import necessary packages"
        },
        {
            "location": "/quickstart/#initialize-telescope-class-that-implements-the-arc-35m-at-apo",
            "text": "Also correctly sets up the diffuser in ARCTIC (0.34 deg opening angle, at a distance of 200mm)  arc = idiffuse.telescope.TelescopeARC()  # Print descriptive text about the telescope\nprint(arc)  Telescope:                      ARC 3.5m\nThroughput (flat) (%):          39.838\nDiameter (cm):                  350.000\nFnum:                           8.000\nFocal length (m):               28.000\nGain:                           2.000\nPixel size (um):                15.000\nNum pixels:                     4096.000\nPlate scale (arcsec/pix):       0.110\nFOV (arcmin):                   7.509\nDark Noise (e/s/pix):           0.000\nRead Noise (e/pix):             3.700\nAltitude (m):                   2788.000\nCentral Obstruction (%):        9.000\nDiffuser dist to detector (mm): 200.000\n11 available filters in folder: /Users/gks/Dropbox/mypylib/notebooks/GIT/idiffuse/idiffuse/filters  The arc object has an attribute to list the available filters.\nThese are also accessible through the arc.FILT_DICT dictionary.  arc.get_filter_filenames()  ['/Users/gks/Dropbox/mypylib/notebooks/GIT/idiffuse/idiffuse/filters/arctic_qe.txt',\n '/Users/gks/Dropbox/mypylib/notebooks/GIT/idiffuse/idiffuse/filters/bess-b.txt',\n '/Users/gks/Dropbox/mypylib/notebooks/GIT/idiffuse/idiffuse/filters/bess-i.txt',\n '/Users/gks/Dropbox/mypylib/notebooks/GIT/idiffuse/idiffuse/filters/bess-r.txt',\n '/Users/gks/Dropbox/mypylib/notebooks/GIT/idiffuse/idiffuse/filters/bess-u.txt',\n '/Users/gks/Dropbox/mypylib/notebooks/GIT/idiffuse/idiffuse/filters/bess-v.txt',\n '/Users/gks/Dropbox/mypylib/notebooks/GIT/idiffuse/idiffuse/filters/semrock_857_30.txt',\n '/Users/gks/Dropbox/mypylib/notebooks/GIT/idiffuse/idiffuse/filters/sloan_g_filter.txt',\n '/Users/gks/Dropbox/mypylib/notebooks/GIT/idiffuse/idiffuse/filters/sloan_i_filter.txt',\n '/Users/gks/Dropbox/mypylib/notebooks/GIT/idiffuse/idiffuse/filters/sloan_r_filter.txt',\n '/Users/gks/Dropbox/mypylib/notebooks/GIT/idiffuse/idiffuse/filters/sloan_z_filter.txt']",
            "title": "Initialize Telescope Class that implements the ARC 3.5m at APO"
        },
        {
            "location": "/quickstart/#plot-telescope-qe-throughput-plot-for-given-filters",
            "text": "We can plot the throughput of the different filters used, and compare them to the Quantum Efficiency of the ARCTIC detector.  # use FILT_DICT dictionary\nifilt = S.FileBandpass(arc.FILTER_DICT['sloan_i_filter.txt'])\nrfilt = S.FileBandpass(arc.FILTER_DICT['sloan_r_filter.txt'])\n\narc.plot_throughput(bandpass=rfilt,bandpass_name=\"SDSS r'\")\narc.plot_throughput(bandpass=ifilt,bandpass_name=\"SDSS i'\")",
            "title": "Plot Telescope QE / Throughput plot for given filters"
        },
        {
            "location": "/quickstart/#example-on-sky-diffuser-assisted-precision",
            "text": "Below are examples of how to calculate the expected photometric error and the resulting cadence for on-sky observations of a given target. In Stefansson et al. 2018, we compare these expected precision values to the on-sky achieved precision.",
            "title": "Example on-sky diffuser assisted precision"
        },
        {
            "location": "/quickstart/#k2-28b",
            "text": "err, cad = arc.get_err_cad_for_adu(vegamag=13.8,\n                        BandPass=ifilt,\n                        binning=4,\n                        max_adu_per_pixel=2800.,\n                        read_time=2.7,\n                        airmass=1.3,\n                        num_ref_stars=3.,\n                        sky_mag_per_arcsec=19.7)  ##### Exptime #####\nExptime [s]:                  29.954\nTotal cadence [s]:            32.654\nObs. Efficiency [%]:          91.73\nnpix [pix]:                   307.30\nn_b [pix]:                    537.77\n\n##### Counts #####\nStar counts - Total [adu]:    860439.86 \nStar counts - /pix [adu/pix]: 2800.00 \nSky counts - Total [adu]:     223454.12\nSky counts - /pix [adu/pix]:  727.15\n\n##### Noise in exptime=29.95s ######\nPhotometric noise [ppm]       1045.96\nPhoton noise [ppm]:           880.23\nScintillation noise [ppm]:    452.96\nTotal noise [ppm]:            1139.83\n\n##### Noise ######\nNoise in 1min [ppm]:          840.88\nNoise in 30min [ppm]:         153.52\n#####",
            "title": "K2-28b"
        },
        {
            "location": "/quickstart/#tres-3b",
            "text": "err, cad = arc.get_err_cad_for_adu(vegamag=11.2,\n                        BandPass=ifilt,\n                        binning=4,\n                        max_adu_per_pixel=27000.,\n                        read_time=2.7,\n                        airmass=1.2,\n                        num_ref_stars=13.,\n                        sky_mag_per_arcsec=19.7)  ##### Exptime #####\nExptime [s]:                  26.343\nTotal cadence [s]:            29.043\nObs. Efficiency [%]:          90.70\nnpix [pix]:                   307.30\nn_b [pix]:                    537.77\n\n##### Counts #####\nStar counts - Total [adu]:    8297098.66 \nStar counts - /pix [adu/pix]: 27000.00 \nSky counts - Total [adu]:     196514.27\nSky counts - /pix [adu/pix]:  639.49\n\n##### Noise in exptime=26.34s ######\nPhotometric noise [ppm]       259.50\nPhoton noise [ppm]:           254.75\nScintillation noise [ppm]:    377.35\nTotal noise [ppm]:            457.97\n\n##### Noise ######\nNoise in 1min [ppm]:          318.63\nNoise in 30min [ppm]:         58.17\n#####",
            "title": "TRES-3b"
        },
        {
            "location": "/quickstart/#wasp-85-a-b",
            "text": "err, cad = arc.get_err_cad_for_adu(vegamag=10.0,\n                        BandPass=rfilt,\n                        binning=4,\n                        max_adu_per_pixel=20000.,\n                        read_time=2.7,\n                        airmass=1.3,\n                        num_ref_stars=3.,\n                        sky_mag_per_arcsec=19.7)  ##### Exptime #####\nExptime [s]:                  3.896\nTotal cadence [s]:            6.596\nObs. Efficiency [%]:          59.07\nnpix [pix]:                   307.30\nn_b [pix]:                    537.77\n\n##### Counts #####\nStar counts - Total [adu]:    6145999.01 \nStar counts - /pix [adu/pix]: 20000.00 \nSky counts - Total [adu]:     48201.48\nSky counts - /pix [adu/pix]:  156.85\n\n##### Noise in exptime=3.90s ######\nPhotometric noise [ppm]       331.46\nPhoton noise [ppm]:           329.35\nScintillation noise [ppm]:    1255.93\nTotal noise [ppm]:            1298.94\n\n##### Noise ######\nNoise in 1min [ppm]:          430.69\nNoise in 30min [ppm]:         78.63\n#####",
            "title": "WASP-85 A b"
        },
        {
            "location": "/quickstart/#k2-100b",
            "text": "err, cad = arc.get_err_cad_for_adu(vegamag=10.0,\n                        BandPass=ifilt,\n                        binning=4,\n                        max_adu_per_pixel=23000.,\n                        read_time=2.7,\n                        airmass=1.05,\n                        num_ref_stars=10.,\n                        sky_mag_per_arcsec=19.7)  ##### Exptime #####\nExptime [s]:                  7.431\nTotal cadence [s]:            10.131\nObs. Efficiency [%]:          73.35\nnpix [pix]:                   307.30\nn_b [pix]:                    537.77\n\n##### Counts #####\nStar counts - Total [adu]:    7067898.86 \nStar counts - /pix [adu/pix]: 23000.00 \nSky counts - Total [adu]:     55431.70\nSky counts - /pix [adu/pix]:  180.38\n\n##### Noise in exptime=7.43s ######\nPhotometric noise [ppm]       280.74\nPhoton noise [ppm]:           278.96\nScintillation noise [ppm]:    568.44\nTotal noise [ppm]:            633.98\n\n##### Noise ######\nNoise in 1min [ppm]:          260.51\nNoise in 30min [ppm]:         47.56\n#####",
            "title": "K2-100b"
        },
        {
            "location": "/diffuser_calculator/",
            "text": "Sizing Diffusers\n\n\niDiffuse\n provides two ways to calculate the expected Full Width at Half Maximum size of a given diffuser on the focal plane:\n\n\n\n\nOn-line calculator below.\n\n\nPython function as part of \niDiffuse\n\n\n\n\nBoth calculators use the following equation, \n$$S = \\tan(\\theta) D,$$\nwhere \\(S\\) is the FWHM of the diffused PSF, \\(D\\) is the optical distance of the diffuser from the focal plane, and \\(\\theta\\) is the opening angle of the diffuser as defined in the following figure:\n\n\n\n\nOnline Calculator\n\n\nThe following online calculator calculates the expected Point Spread Function (PSF) size of an Engineered Diffuser in a converging / collimated beam, returning the Full-Width-at-Half-Maximum (FWHM) of the resulting top-hat PSF.\n\n\nNotes:\n\n\n\n\nAssumes a top-hat PSF\n\n\nDistance from the detector should be the optical distance, i.e., it assumes this has accounted for the optical thickness (thickness times the index of refraction of a glass) of the materials\n\n\nThis equation is valid to first order. For more thorough analyzis, we suggest full non-sequential optical modeling in Zemax. RPC Photonics makes this easy as they provide the as-measured scattering BSDF files freely online \nhttps://www.rpcphotonics.com/bsdf-data-optical-diffusers/\n \n\n\n\n\n\n\n\n\n\n\n\n    \nCalculating Expected Diffuser PSF FWHM\n\n    \n\n       \nOpening Angle (deg):\n\n             \n\n           \n\n        \n\n    \n\n    \n\n       \nDiffuser-to-detector distance (mm):\n\n             \n\n        \n\n        \n\n    \n\n    \n\n    \n\n       \nPixel Size (micron):\n\n             \n\n        \n\n        \n\n    \n\n    \n\n    \n\n       \nPlate Scale (\"/pix):\n\n             \n\n        \n\n        \n\n    \n\n    \n\n        \n\n        or\n        \n\n    \n\n    \nNOTE: Distance is optical length (i.e., weighted by the index of refraction).\n\n    \nDefault values are values for the ARCTIC/diffuser system\n\n    \n\n       \nDiffused PSF FWHM (pix):\n\n             \n\n           \n\n         \n\n    \n\n    \n\n       \nDiffused PSF FWHM (\"):\n\n             \n\n           \n\n         \n\n    \n\n\n\n\n\n\n\n\n(function () {\n    function getTanFromDegrees(degrees) {\n        return ( Math.tan(degrees * Math.PI / 180) );\n    }\n\n    function get_diffused_FWHM(angle, distance, pixelsize, platescale) {\n        // Calculate diffuser FWHM\n        // INPUT:\n        //    angle in degrees\n        //    distance in mm\n        //    pixelsize in microns\n        //    platescale in arcsec / pix\n        // OUTPUT:\n        //    FWHM in pixels\n        angle = parseFloat(angle);\n        distance = parseFloat(distance);\n        pixelsize = parseFloat(pixelsize);\n        platescale = parseFloat(platescale);\n        fwhm_in_pix = 2*getTanFromDegrees(angle/2)*distance/(pixelsize/1000);\n        return ( parseFloat(fwhm_in_pix).toFixed(2) );\n    }\n\n    var diffuserForm = document.getElementById(\"diffuserform\");\n    if (diffuserForm) {\n        diffuserForm.onsubmit = function () {\n            fwhm_pix = get_diffused_FWHM(this.angle.value,this.distance.value,this.pixelsize.value,this.platescale.value);\n            fwhm_arcsec = fwhm_pix * this.platescale.value ;\n            this.fwhm_pix.value = fwhm_pix;\n            this.fwhm_arcsec.value = parseFloat(fwhm_arcsec).toFixed(2);\n            return false;\n        };\n    }\n}());\n\n\n\n\nPython Function\n\n\nAdditionally \niDiffuse\n provides a simple Python function that performs the same calculation as in the online calculator above.\n\n\nThis function can be used in the following way:\n\n\nfrom idiffuse import diffuser\nplt_scale = 0.11 # arcsec/pix\nfwhm_pix = diffuser.calculate_diffuser_fwhm(opening_angle=0.34,         # deg\n                                            distance_from_detector=200, # mm\n                                            pix_size=13.5)              # pixels\nfwhm_arcsec = fwhm_pix * plt_scale\nprint('FWHM in pixels: {:0.3f}'.format(fwhm_pix))\nprint('FWHM in arcsec: {:0.3f}'.format(fwhm_arcsec))\n\n\n\n\nwhich gives the following output:\n\n\nFWHM in pixels: 87.913\nFWHM in arcsec: 9.670",
            "title": "Sizing Diffusers"
        },
        {
            "location": "/diffuser_calculator/#sizing-diffusers",
            "text": "iDiffuse  provides two ways to calculate the expected Full Width at Half Maximum size of a given diffuser on the focal plane:   On-line calculator below.  Python function as part of  iDiffuse   Both calculators use the following equation, \n$$S = \\tan(\\theta) D,$$\nwhere \\(S\\) is the FWHM of the diffused PSF, \\(D\\) is the optical distance of the diffuser from the focal plane, and \\(\\theta\\) is the opening angle of the diffuser as defined in the following figure:",
            "title": "Sizing Diffusers"
        },
        {
            "location": "/diffuser_calculator/#online-calculator",
            "text": "The following online calculator calculates the expected Point Spread Function (PSF) size of an Engineered Diffuser in a converging / collimated beam, returning the Full-Width-at-Half-Maximum (FWHM) of the resulting top-hat PSF.  Notes:   Assumes a top-hat PSF  Distance from the detector should be the optical distance, i.e., it assumes this has accounted for the optical thickness (thickness times the index of refraction of a glass) of the materials  This equation is valid to first order. For more thorough analyzis, we suggest full non-sequential optical modeling in Zemax. RPC Photonics makes this easy as they provide the as-measured scattering BSDF files freely online  https://www.rpcphotonics.com/bsdf-data-optical-diffusers/",
            "title": "Online Calculator"
        },
        {
            "location": "/diffuser_calculator/#python-function",
            "text": "Additionally  iDiffuse  provides a simple Python function that performs the same calculation as in the online calculator above.  This function can be used in the following way:  from idiffuse import diffuser\nplt_scale = 0.11 # arcsec/pix\nfwhm_pix = diffuser.calculate_diffuser_fwhm(opening_angle=0.34,         # deg\n                                            distance_from_detector=200, # mm\n                                            pix_size=13.5)              # pixels\nfwhm_arcsec = fwhm_pix * plt_scale\nprint('FWHM in pixels: {:0.3f}'.format(fwhm_pix))\nprint('FWHM in arcsec: {:0.3f}'.format(fwhm_arcsec))  which gives the following output:  FWHM in pixels: 87.913\nFWHM in arcsec: 9.670",
            "title": "Python Function"
        },
        {
            "location": "/about_diffusers/",
            "text": "About Diffusers\n\n\nDiffusers can be most easily installed in a telescope by putting them in a dual filter wheel. This makes it easy to change between diffused and non-diffused observations (useful to find the field and focus), and to choose which filter to pair with the diffuser. The figure below gives an example of a diffuser in a dual filter wheel. \n\n\n\n\nThe following video compares defocused and diffused PSFs.\n\n\nThe defocused PSF is irregular and changes with seeing and other atmospheric effects, while the diffused PSF is stable throughout the night.\n\n\n\n\n\nFurther reading\n\n\nFurther reading about diffusers for precision photometry applications can be found in the following papers:\n\n\n\n\nPaper I\n\n\nPaper II",
            "title": "About Diffusers"
        },
        {
            "location": "/about_diffusers/#about-diffusers",
            "text": "Diffusers can be most easily installed in a telescope by putting them in a dual filter wheel. This makes it easy to change between diffused and non-diffused observations (useful to find the field and focus), and to choose which filter to pair with the diffuser. The figure below gives an example of a diffuser in a dual filter wheel.    The following video compares defocused and diffused PSFs.  The defocused PSF is irregular and changes with seeing and other atmospheric effects, while the diffused PSF is stable throughout the night.",
            "title": "About Diffusers"
        },
        {
            "location": "/about_diffusers/#further-reading",
            "text": "Further reading about diffusers for precision photometry applications can be found in the following papers:   Paper I  Paper II",
            "title": "Further reading"
        }
    ]
}